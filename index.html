<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Millie's Reborn Nursery</title>
    <link rel="shortcut icon" href="https://placehold.co/32x32/FFB6C1/5A2D4E?text=M" type="image/x-icon">
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #ffe6f2;
            color: #5a2d4e;
            overflow-x: hidden;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* –§–æ–Ω */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23ff99cc" d="M50,20 C60,10 75,10 85,20 C95,30 95,45 85,55 L50,90 L15,55 C5,45 5,30 15,20 C25,10 40,10 50,20 Z" /></svg>');
            background-size: 200px;
            opacity: 0.2;
            filter: blur(5px);
            z-index: -1;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            cursor: pointer;
            background-color: #ff66a3;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .nav-toggle:hover {
            background-color: #ff3385;
            animation: pulse 1s infinite;
        }

        .nav-toggle span {
            display: block;
            width: 6px;
            height: 6px;
            background-color: white;
            border-radius: 50%;
            margin: 2px;
        }

        .navigation {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background-color: rgba(255, 153, 204, 0.95);
            z-index: 999;
            transition: right 0.5s ease;
            padding: 80px 20px 20px;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        }

        .navigation.active {
            right: 0;
        }

        .navigation ul {
            list-style: none;
        }

        .navigation li {
            margin-bottom: 15px;
        }

        .navigation a {
            color: #5a2d4e;
            text-decoration: none;
            font-size: 18px;
            display: block;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .navigation a:hover {
            background-color: #ff99cc;
            color: white;
            transform: translateX(5px);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –°–ï–ö–¶–ò–ò */
        section {
            display: none; /* –í—Å–µ —Å–µ–∫—Ü–∏–∏ —Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            padding: 40px 20px;
            animation: fadeIn 0.8s ease;
        }

        section.active {
            display: block; /* –ê–∫—Ç–∏–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è –≤–∏–¥–Ω–∞ */
        }

        h1, h2, h3 {
            color: #cc0066;
            margin-bottom: 20px;
            text-align: center;
            animation: slideIn 0.8s ease;
        }

        p {
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: center;
        }

        /* –ì–∞–ª–µ—Ä–µ—è */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .photo-frame {
            position: relative;
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            animation: slideIn 0.8s ease;
        }

        .photo-frame:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .photo-frame img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
            background-color: #fce4ec;
        }

        /* –§–æ—Ä–º—ã */
        form {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #cc0066;
            font-weight: bold;
        }

        input, textarea, select {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ff99cc;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        button {
            background-color: #ff66a3;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        button:hover {
            background-color: #cc0066;
            transform: scale(1.05);
        }

        /* –ö–æ—Ä–∑–∏–Ω–∞ */
        .cart-items {
            margin-bottom: 30px;
        }

        .cart-total {
            text-align: right;
            font-size: 20px;
            font-weight: bold;
            margin-top: 20px;
            color: #cc0066;
        }

        /* –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å */
        .admin-panel {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .admin-table th, .admin-table td {
            border: 1px solid #ff99cc;
            padding: 10px;
            text-align: left;
        }

        .admin-table th {
            background-color: #ff99cc;
            color: white;
        }

        /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
        #comments-section {
            background: linear-gradient(135deg, #fff5f9 0%, #ffe6f2 100%);
            border-radius: 15px;
        }

        .comment-card {
            margin-bottom: 20px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 10000;
            animation: slideIn 0.3s ease;
            max-width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .notification.success { background: #4CAF50; }
        .notification.error { background: #f44336; }
        .notification.warning { background: #ff9800; }

        /* –§—É—Ç–µ—Ä */
        footer {
            background-color: #ff99cc;
            color: white;
            padding: 30px 20px;
            text-align: center;
            margin-top: 50px;
        }
        
        .social-links a {
            color: white;
            margin: 0 10px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="background"></div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="nav-toggle" id="navToggle">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <nav class="navigation" id="navigation">
        <ul>
            <li><a href="#" data-section="home">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="#" data-section="about">–û –Ω–∞—Å</a></li>
            <li><a href="#" data-section="gallery">–ì–∞–ª–µ—Ä–µ—è</a></li>
            <li><a href="#" data-section="order">–ó–∞–∫–∞–∑</a></li>
            <li><a href="#" data-section="cart">–ö–æ—Ä–∑–∏–Ω–∞</a></li>
            <li><a href="#" data-section="admin">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a></li>
            <!-- –ò–°–ü–†–ê–í–õ–ï–ù–û: –¢–µ–ø–µ—Ä—å —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Å—Å—ã–ª–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–µ–∫—Ü–∏—é -->
            <li><a href="#" data-section="comments-section">–û—Ç–∑—ã–≤—ã</a></li>
        </ul>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="content">
        <!-- –ì–ª–∞–≤–Ω–∞—è -->
        <section id="home" class="active">
            <h1>Millie's Reborn Nursery</h1>
            <p>–°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫—É–∫–ª—ã —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç –ª—é–±–∏–º—ã–º–∏ –∏–≥—Ä—É—à–∫–∞–º–∏ –≤–∞—à–∏—Ö –¥–µ—Ç–µ–π.</p>
            <div style="text-align: center; margin-top: 30px;">
                <button id="exploreBtn">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≥–∞–ª–µ—Ä–µ—é</button>
            </div>
        </section>

        <!-- –û –Ω–∞—Å -->
        <section id="about">
            <h2>–û –Ω–∞—Å</h2>
            <p>–ú—ã - –∫–æ–º–∞–Ω–¥–∞ –º–∞—Å—Ç–µ—Ä–æ–≤, —Å–æ–∑–¥–∞—é—â–∏—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫—É–∫–ª—ã –Ω–∞ –∑–∞–∫–∞–∑.</p>
        </section>

        <!-- –ì–∞–ª–µ—Ä–µ—è -->
        <section id="gallery">
            <h2>–ì–∞–ª–µ—Ä–µ—è –∫—É–∫–æ–ª</h2>
            <!-- /// –ò–ó–ú–ï–ù–ï–ù–ù–´–ô –ë–õ–û–ö /// -->
            <div class="gallery">
                <div class="photo-frame"><img src="–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_viber_2025-11-01_12-52-31-434.jpg" alt="–§–æ—Ç–æ 1"></div>
                <div class="photo-frame"><img src="–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_viber_2025-11-01_12-52-32-199.jpg" alt="–§–æ—Ç–æ 2"></div>
                <div class="photo-frame"><img src="–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_viber_2025-11-01_12-52-32-253.jpg" alt="–§–æ—Ç–æ 3"></div>
                <div class="photo-frame"><img src="–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_viber_2025-11-01_12-52-32-348.jpg" alt="–§–æ—Ç–æ 4"></div>
                <div class="photo-frame"><img src="–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_viber_2025-11-01_12-52-32-408.jpg" alt="–§–æ—Ç–æ 5"></div>
                <div class="photo-frame"><img src="–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ_viber_2025-11-01_12-52-32-464.jpg" alt="–§–æ—Ç–æ 6"></div>
            </div>
            <!-- /// –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ù–û–ì–û –ë–õ–û–ö–ê /// -->
        </section>

        <!-- –ó–∞–∫–∞–∑ -->
        <section id="order">
            <h2>–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</h2>
            <form id="orderForm">
                <div class="form-group">
                    <label for="name">–í–∞—à–µ –∏–º—è:</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="dollType">–¢–∏–ø –∫—É–∫–ª—ã:</label>
                    <select id="dollType" name="dollType" required>
                        <option value="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è</option>
                        <option value="custom">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:</label>
                    <textarea id="description" name="description" rows="5" required></textarea>
                </div>
                <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </form>
        </section>

        <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
        <section id="cart">
            <h2>–ö–æ—Ä–∑–∏–Ω–∞ –∑–∞–∫–∞–∑–æ–≤</h2>
            <div class="cart-items"><p style="text-align:center">–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫–∞ –ø—É—Å—Ç–∞</p></div>
        </section>

        <!-- –û—Ç–∑—ã–≤—ã -->
        <!-- –ò–°–ü–†–ê–í–õ–ï–ù–û: –¢–µ–ø–µ—Ä—å —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–µ–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ .content -->
        <section id="comments-section">
            <h2 style="font-size: 2.5em;">üí¨ –û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
            
            <!-- –§–æ—Ä–º–∞ -->
            <div style="max-width: 800px; margin: 0 auto 50px; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                <h3 style="color: #cc0066; text-align: center; margin-bottom: 25px;">–û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤</h3>
                <form id="commentsForm">
                    <div class="form-group">
                        <label for="commentName">–í–∞—à–µ –∏–º—è:</label>
                        <input type="text" id="commentName" required>
                    </div>
                    <div class="form-group">
                        <label for="commentText">–í–∞—à –æ—Ç–∑—ã–≤:</label>
                        <textarea id="commentText" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="commentRating">–û—Ü–µ–Ω–∫–∞:</label>
                        <select id="commentRating" required>
                            <option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ –û—Ç–ª–∏—á–Ω–æ</option>
                            <option value="4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ –•–æ—Ä–æ—à–æ</option>
                            <option value="3">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ –ù–æ—Ä–º–∞–ª—å–Ω–æ</option>
                        </select>
                    </div>
                    <button type="submit">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤</button>
                </form>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ -->
            <div id="commentsDisplay" style="max-width: 1000px; margin: 0 auto;">
                <div id="commentsList" style="display: grid; gap: 20px;"></div>
            </div>
        </section>

        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <section id="admin">
            <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
            <div id="adminLogin" class="admin-login">
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="adminPassword" required>
                </div>
                <button id="loginBtn">–í–æ–π—Ç–∏</button>
            </div>
            
            <div id="adminPanel" class="admin-panel" style="display: none;">
                <!-- –ë–ª–æ–∫ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù -->
                <div id="megaStatus" style="margin: 15px 0; padding: 12px; border-radius: 8px; text-align: center; font-weight: bold; background: #eee;">
                    –°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <!-- –ö–Ω–æ–ø–∫–∏ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' –∏ '–ó–∞–≥—Ä—É–∑–∏—Ç—å' –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–´ -->
                    <button id="syncBtn" style="background: #4CAF50;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ data.json</button>
                    <button id="loadBtn" style="background: #2196F3;">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ data.json</button>
                    <button id="logoutBtn" style="background: #f44336;">–í—ã–π—Ç–∏</button>
                </div>

                <h3>–ó–∞–∫–∞–∑—ã</h3>
                <div id="ordersList">
                    <table class="admin-table"><tbody id="ordersTableBody"></tbody></table>
                </div>
                
                <h3 style="margin-top: 30px;">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
                <div id="commentsAdminList">
                    <table class="admin-table"><tbody id="commentsTableBody"></tbody></table>
                </div>
            </div>
        </section>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        <p>–¢–µ–ª–µ—Ñ–æ–Ω: +380977057272 | –£–∫—Ä–∞–∏–Ω–∞</p>
        <div class="social-links">
            <a href="#">Instagram</a> <a href="#">TikTok</a> <a href="#">Telegram</a>
        </div>
    </footer>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–´ —Å –≤–∞—à–∏–º –ù–û–í–´–ú —Ç–æ–∫–µ–Ω–æ–º
        const YANDEX_DISK_TOKEN = "y0__xDK_b6HCBjblgMg-d2NkBVX4rnW-kp2fSFONufPnpCLTE6fDQ";
        const YANDEX_API_URL = "https://cloud-api.yandex.net/v1/disk/resources";
        const DATA_FILENAME = "data.json"; // –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ–≥–æ
        
        let isAdminLoggedIn = false; // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Ö–æ–¥–∞
        let pollIntervalId; // –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

        // === –ù–ê–í–ò–ì–ê–¶–ò–Ø (–ò–°–ü–†–ê–í–õ–ï–ù–û) ===
        document.getElementById('navToggle').addEventListener('click', () => {
            document.getElementById('navigation').classList.toggle('active');
        });

        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è –í–°–ï–• —Å—Å—ã–ª–æ–∫, –≤–∫–ª—é—á–∞—è –û—Ç–∑—ã–≤—ã
        document.querySelectorAll('.navigation a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');

                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
                document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é
                const target = document.getElementById(sectionId);
                if (target) target.classList.add('active');

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
                document.getElementById('navigation').classList.remove('active');

                if (sectionId === 'admin') checkAdminAuth(); // –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
            });
        });

        document.getElementById('exploreBtn').addEventListener('click', function() {
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            document.getElementById('gallery').classList.add('active');
        });

        // === –î–ê–ù–ù–´–ï (Local Storage + Yandex) ===
        
        // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
        function getLocalData() {
            return {
                orders: JSON.parse(localStorage.getItem('dollOrders') || '[]'),
                comments: JSON.parse(localStorage.getItem('dollComments') || '[]')
            };
        }

        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
        function saveLocalData(orders, comments) {
            if (orders) localStorage.setItem('dollOrders', JSON.stringify(orders));
            if (comments) localStorage.setItem('dollComments', JSON.stringify(comments));
        }

        // === –§–£–ù–ö–¶–ò–ò YANDEX DISK (syncToYandex, loadFromYandex) –£–õ–£–ß–®–ï–ù–´ ===
        
        async function syncToYandex() {
            showNotification('‚è≥ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ–±–ª–∞–∫–æ...', 'warning');
            const data = getLocalData();
            
            try {
                // 1. –ü–æ–ª—É—á–∞–µ–º URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
                const uploadResp = await fetch(`${YANDEX_API_URL}/upload?path=/doll_shop/${DATA_FILENAME}&overwrite=true`, {
                    headers: { 'Authorization': `OAuth ${YANDEX_DISK_TOKEN}` }
                });
                
                if (uploadResp.ok) {
                    const { href } = await uploadResp.json();
                    // 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const putResp = await fetch(href, { method: 'PUT', body: blob });
                    
                    if (putResp.ok) {
                        showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ data.json!', 'success');
                        document.getElementById('megaStatus').textContent = '–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –æ–±–ª–∞–∫–µ';
                    }
                } else {
                    // –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ HTTP
                    const status = uploadResp.status;
                    const errorText = await uploadResp.text();
                    console.error(`‚ùå –û—à–∏–±–∫–∞ Yandex API. –°—Ç–∞—Ç—É—Å: ${status}. –û—Ç–≤–µ—Ç: ${errorText.substring(0, 100)}...`);
                    showNotification(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (–°—Ç–∞—Ç—É—Å ${status}). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ –ø—É—Ç—å!`, 'error');
                    document.getElementById('megaStatus').textContent = `–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (${status})`;
                }
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (NetworkError/CORS):", e);
                showNotification('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ø.–î–∏—Å–∫–æ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ/—Ç–æ–∫–µ–Ω.', 'error');
                document.getElementById('megaStatus').textContent = '–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –û—à–∏–±–∫–∞ —Å–µ—Ç–∏/CORS';
            }
        }

        async function loadFromYandex(isSilent = false) {
            if (!isSilent) {
                showNotification('‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –æ–±–ª–∞–∫–∞...', 'warning');
                document.getElementById('megaStatus').textContent = '–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –ó–∞–≥—Ä—É–∑–∫–∞...';
            }
            
            try {
                // 1. –ü–æ–ª—É—á–∞–µ–º URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                const downloadResp = await fetch(`${YANDEX_API_URL}/download?path=/doll_shop/${DATA_FILENAME}`, {
                    headers: { 'Authorization': `OAuth ${YANDEX_DISK_TOKEN}` }
                });
                
                if (downloadResp.ok) {
                    const { href } = await downloadResp.json();
                    // 2. –ü–æ–ª—É—á–∞–µ–º —Å–∞–º —Ñ–∞–π–ª
                    const fileResp = await fetch(href);
                    const data = await fileResp.json();
                    
                    if (data) {
                        // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
                        const localComments = JSON.parse(localStorage.getItem('dollComments') || '[]');
                        const cloudCommentsJSON = JSON.stringify(data.comments);
                        const localCommentsJSON = JSON.stringify(localComments);

                        if (cloudCommentsJSON !== localCommentsJSON || isSilent === false) {
                            saveLocalData(data.orders, data.comments);
                            renderAll();
                            if (!isSilent) showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!', 'success');
                        }
                        
                        if (!isSilent) document.getElementById('megaStatus').textContent = '–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –æ–±–ª–∞–∫–∞';
                        return true;
                    }
                } else {
                    // –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ HTTP
                    const status = downloadResp.status;
                    const errorText = await downloadResp.text();
                    console.error(`‚ùå –û—à–∏–±–∫–∞ Yandex API. –°—Ç–∞—Ç—É—Å: ${status}. –û—Ç–≤–µ—Ç: ${errorText.substring(0, 100)}...`);
                    
                    if (!isSilent) {
                        showNotification(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (–°—Ç–∞—Ç—É—Å ${status}). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞!`, 'error');
                        document.getElementById('megaStatus').textContent = `–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (${status})`;
                    }
                }
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (NetworkError/CORS):", e);
                if (!isSilent) {
                    showNotification('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ø.–î–∏—Å–∫–æ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ/—Ç–æ–∫–µ–Ω.', 'error');
                    document.getElementById('megaStatus').textContent = '–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö';
                }
            }
            return false;
        }

        // === –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø (–ü–û–õ–õ–ò–ù–ì) ===
        function startPolling() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–ª–∞–∫–æ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ (10000 –º—Å)
            pollIntervalId = setInterval(async () => {
                // –í—ã–∑—ã–≤–∞–µ–º loadFromYandex –≤ —Ç–∏—Ö–æ–º —Ä–µ–∂–∏–º–µ
                await loadFromYandex(true); 
                document.getElementById('megaStatus').textContent = '–°—Ç–∞—Ç—É—Å –Ø.–î–∏—Å–∫–∞: –ê–∫—Ç–∏–≤–µ–Ω (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫)';

            }, 10000); 
        }


        // === –ê–î–ú–ò–ù–ö–ê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø (–ò–°–ü–†–ê–í–õ–ï–ù–û) ===
        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞, —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É 'checkAdminAuth is not defined'
        function checkAdminAuth() {
            if (isAdminLoggedIn) {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                renderAll(); 
            } else {
                document.getElementById('adminLogin').style.display = 'block';
                document.getElementById('adminPanel').style.display = 'none';
            }
        }


        // === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –§–û–†–ú ===

        // –ó–∞–∫–∞–∑
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const { orders } = getLocalData();
            
            const newOrder = {
                id: Date.now(),
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                dollType: document.getElementById('dollType').value,
                description: document.getElementById('description').value,
                date: new Date().toLocaleDateString()
            };
            
            orders.push(newOrder);
            saveLocalData(orders, null);
            syncToYandex(); // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–û
            
            showNotification('‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!', 'success');
            this.reset();
        });

        // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        document.getElementById('commentsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const { comments } = getLocalData();
            
            const newComment = {
                id: Date.now(),
                name: document.getElementById('commentName').value,
                text: document.getElementById('commentText').value,
                rating: parseInt(document.getElementById('commentRating').value),
                date: new Date().toISOString(),
                approved: true
            };
            
            comments.unshift(newComment);
            saveLocalData(null, comments);
            syncToYandex(); // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–û
            
            renderAll();
            showNotification('‚úÖ –û—Ç–∑—ã–≤ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success');
            this.reset();
        });

        // === –†–ï–ù–î–ï–†–ò–ù–ì ===
        function renderAll() {
            const { orders, comments } = getLocalData();
            
            // –†–µ–Ω–¥–µ—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–∫–ª–∏–µ–Ω—Ç)
            const list = document.getElementById('commentsList');
            if (comments.length === 0) {
                list.innerHTML = '<div style="text-align:center; padding:20px;">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤</div>';
            } else {
                list.innerHTML = comments.map(c => `
                    <div style="background:white; padding:20px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
                        <div style="display:flex; justify-content:space-between; color:#cc0066; font-weight:bold;">
                            <span>${c.name}</span>
                            <span style="color:#ffcc00;">${'‚òÖ'.repeat(c.rating)}</span>
                        </div>
                        <p style="text-align:left; margin-top:10px;">${c.text}</p>
                        <small style="color:#999;">${new Date(c.date).toLocaleDateString()}</small>
                    </div>
                `).join('');
            }

            // –†–µ–Ω–¥–µ—Ä –∞–¥–º–∏–Ω–∫–∏
            document.getElementById('ordersTableBody').innerHTML = orders.map(o => `
                <tr><td>${o.id}</td><td>${o.name}</td><td>${o.dollType}</td><td>${o.date}</td></tr>
            `).join('');

            document.getElementById('commentsTableBody').innerHTML = comments.map(c => `
                <tr>
                    <td>${c.name}</td>
                    <td>${c.text.substring(0, 30)}...</td>
                    <td>${c.rating}</td>
                    <td><button onclick="deleteItem('comment', ${c.id})" style="background:#f44336; color:white; border:none; padding:5px;">–£–¥–∞–ª–∏—Ç—å</button></td>
                </tr>
            `).join('');
        }

        // === –ê–î–ú–ò–ù–ö–ê ===
        window.deleteItem = function(type, id) {
            // –ó–∞–º–µ–Ω–∞ –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–æ–¥–∞–ª
            const confirmation = window.confirm ? confirm('–£–¥–∞–ª–∏—Ç—å?') : true; // –í—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥ –¥–ª—è iFrame

            if (!confirmation) return;
            let { orders, comments } = getLocalData();
            
            if (type === 'comment') {
                comments = comments.filter(c => c.id !== id);
            }
            
            saveLocalData(orders, comments);
            syncToYandex(); // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–û
            renderAll();
        };

        document.getElementById('loginBtn').addEventListener('click', () => {
            if (document.getElementById('adminPassword').value === '1488') {
                isAdminLoggedIn = true;
                checkAdminAuth(); // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é
            } else {
                showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å', 'error');
            }
        });
        
        document.getElementById('logoutBtn').addEventListener('click', () => {
             isAdminLoggedIn = false;
             checkAdminAuth(); // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ 'syncBtn' –∏ 'loadBtn' –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–´
        document.getElementById('syncBtn').addEventListener('click', syncToYandex);
        document.getElementById('loadBtn').addEventListener('click', () => loadFromYandex(false));
        
        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(msg, type) {
            const n = document.createElement('div');
            n.className = `notification ${type}`;
            n.textContent = msg;
            document.body.appendChild(n);
            setTimeout(() => n.remove(), 3000);
        }

        // –°—Ç–∞—Ä—Ç
        document.addEventListener('DOMContentLoaded', () => {
            renderAll();
            loadFromYandex(false); // –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–Ω–µ —Ç–∏—Ö–∞—è)
            startPolling(); // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        });
    </script>
</body>
</html>
